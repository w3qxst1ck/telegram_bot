import datetime

import pytz

from settings import settings
from utils.date_time_service import convert_date_time
from handlers.buttons import menu as btn
from handlers.buttons import commands as cmd


def choose_country() -> str:
    """–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –≤—ã–±—Ä–∞—Ç—å —Å—Ç—Ä–∞–Ω—É –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ –Ω–æ–≤–æ–≥–æ –∫–ª—é—á–∞"""
    message = "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É, –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∫–æ—Ç–æ—Ä–æ–π —Ö–æ—Ç–∏—Ç–µ –∫—É–ø–∏—Ç—å:\n"

    return message


def new_key_message(balance: int) -> str:
    """–°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –Ω–æ–≤–æ–≥–æ –∫–ª—é—á–∞"""
    message = f"üí∞ –£ –≤–∞—Å –Ω–∞ –±–∞–ª–∞–Ω—Å–µ <b>{balance} —Ä.</b>\n\n" \
               f"–°—Ç–æ–∏–º–æ—Å—Ç—å –∫–ª—é—á–∞ VPN (100 –ì–ë –≤ –º–µ—Å—è—Ü)\n" \
               f"‚Ä¢ 1 –º–µ—Å—è—Ü <b>{settings.price_list['1']} —Ä.</b>\n" \
               f"‚Ä¢ 3 –º–µ—Å—è—Ü–∞ <b>{settings.price_list['3']} —Ä.</b>\n" \
               f"‚Ä¢ 6 –º–µ—Å—è—Ü–µ–≤ <b>{settings.price_list['6']} —Ä.</b>\n" \
               f"‚Ä¢ 12 –º–µ—Å—è—Ü–µ–≤ <b>{settings.price_list['12']} —Ä.</b>\n\n" \
               f"–î–ª—è –ø–æ–∫—É–ø–∫–∏ –∫–ª—é—á–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–º–æ—â—å—é –∫–Ω–æ–ø–æ–∫ –Ω–∏–∂–µ"
    return message


def new_key_confirm_message(period: str, price: int) -> str:
    """–°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–∫—É–ø–∫–∏ –Ω–æ–≤–æ–≥–æ –∫–ª—é—á–∞"""
    message = f"–ö—É–ø–∏—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á –Ω–∞ <b>{period} –º–µ—Å.</b>?\n\n" \
              f"–£ –≤–∞—Å —Å –±–∞–ª–∞–Ω—Å–∞ –±—É–¥–µ—Ç —Å–ø–∏—Å–∞–Ω–æ <b>{price} —Ä.</b>"
    return message


def buy_new_key_message(period: str, price: int, expire_date: datetime.datetime, balance: int, key: str) -> str:
    """–°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ –Ω–æ–≤–æ–≥–æ –∫–ª—é—á–∞ –∑–∞ —Å—á–µ—Ç –±–∞–ª–∞–Ω—Å–∞"""
    date, time = convert_date_time(expire_date.astimezone(tz=pytz.timezone(settings.timezone)))

    message = f"‚úÖ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º, –í—ã –∫—É–ø–∏–ª–∏ –∫–ª—é—á –Ω–∞ *{period} –º–µ—Å.*!\n" \
              f"–° –±–∞–ª–∞–Ω—Å–∞ —Å–ø–∏—Å–∞–Ω–æ {price}—Ä. (–æ—Å—Ç–∞—Ç–æ–∫ {balance} —Ä.)\n"\
              f"–î–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è –∫–ª—é—á–∞ *{time} {date} (–ú–°–ö)*\n\n" \
              f"–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–ª—é—á, —á—Ç–æ–±—ã –µ–≥–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å\n" \
              f"```{key}```\n\n" \
              f"–í—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç–µ —É–∑–Ω–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –∏ —Å—Ä–æ–∫ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ –≤–æ –≤–∫–ª–∞–¥–∫–µ \"{btn.KEYS}\" –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é " \
              f"–∏–ª–∏ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã /{cmd.KEYS[0]}, –∞ —Ç–∞–∫–∂–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –Ω–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—É—é " \
              f"—Å–∏—Å—Ç–µ–º—É /{cmd.INSTRUCTION[0]}"
    return message


def key_description() -> str:
    """–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∏–¥—É–º–∞—Ç—å –∏–º—è –∫–ª—é—á—É"""
    message = "–ù–∞–ø–∏—à–∏—Ç–µ <b>–Ω–∞–∑–≤–∞–Ω–∏–µ –∫–ª—é—á–∞</b>, –Ω–∞–ø—Ä–∏–º–µ—Ä \"–¢–µ–ª–µ—Ñ–æ–Ω\" –∏–ª–∏ \"–ö–æ–º–ø—å—é—Ç–µ—Ä\"\n" \
              "–ù–∞–∑–≤–∞–Ω–∏–µ –∫–ª—é—á–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–µ, –æ–Ω–æ –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ —Ç–æ–ª—å–∫–æ –≤–∞–º\n\n" \
              "–ï—Å–ª–∏ –≤—ã –Ω–∞–∂–º–µ—Ç–µ \"–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å\", –Ω–∞–∑–≤–∞–Ω–∏–µ –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏"
    return message